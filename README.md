# RobôCIn Soccer Analyzer
![](https://img.shields.io/badge/version-v2.0.0-success)
![](https://img.shields.io/badge/python-v3.10-blue)
![](https://img.shields.io/badge/pandas-v1.2.4-informational)

## Description  
This is a Python package created by the members of RobôCIn robotics team
from the Informatics Centre of the Federal University of Pernambuco, CIn - UFPE.
It's purpose is to provide a building block for data science inside the 
2D Simulation, Very Small Size Soccer(VSS) and Small Size League (SSL) 
environments using logfiles generated by each of the categories.

### Table of contents
* [Description](#description)
* [Dependencies](#dependencies)
* [Setup](#setup)
* [Getting Started](#getting-started)

### Dependencies
This project was created with:
- [Python](https://www.python.org/) 3.10.x or above
    - Used to create common classes, structures and algorithms that provides 
    analysis.
- [Pandas](https://pandas.pydata.org/) 1.2.4 or above
    - Provides a simple structure to manipulate all the data gathered. 
- [Numpy](https://numpy.org/) 1.20.3 or above
- [Matplotlib](https://matplotlib.org/) 3.5 or above
- [Seaborn](https://seaborn.pydata.org/) 0.11.2 or above

## Setup
You can install this project as Python package through pip or via git. **We highly recommend you to install SoccerAnalyzer in a miniconda environment using our requirements.txt file.**

```
$ conda create --name analyzer python>=3.10
$ conda activate analyzer
```

### Via github (with miniconda environment)
```
$ git clone git@github.com:robocin/SoccerAnalyzer.git
$ cd SoccerAnalyzer
$ pip install requirements.txt
$ pip install .
```

### Via pip (with miniconda environment)
```
$ pip install socceranalyzer
```

## Getting Started
This package is capable of delivering built-in analysis that were already
created or to be a platform that enables you to create your own analysis.

#### How it works?
Each analysis is a class, they are instantiated and interfaced by a [Facade](https://refactoring.guru/design-patterns/facade)
which is the **common.chore.match_analyzer** module. It is responsible for
creating each analysis object.

When an analysis is instantiated, it builds itself and gathers everything needed to provide the analysis. All information is stored and can be accessed through the Facade targeting specific analysis with **MatchAnalyzer.example_analysis.results()**. 

The **MatchAnalyzer** receives a **Match** object as parameter.

The **Match** receives a **pandas.DataFrame** and a **Category** object as parameter.

These inputs are **mandatory**, otherwise there will be no data to be analyzed.
### Usage
The execution has a common main for every analysis and category, and extending to new categories and analysis should preserve this strucutre. To run analysis from a specific category set, you can specify the **category** param from the configuration file.

```python
import pandas as pd
import argparse
from socceranalyzer import Match, MatchAnalyzer, YamlReader, RunConfiguration

def setup():
    arg_parser = argparse.ArgumentParser()
    arg_parser.add_argument("-f", "--file", help="configuration file, either json or yml")
    args = arg_parser.parse_args()

    info = YamlReader.read(args.file)
    config = RunConfiguration()
    config.parse(info)
    
    return config

if __name__ == "__main__":
    
    config:RunConfiguration = setup()
    
    dataframe = pd.read_csv(config.file_path)
    match = Match(dataframe, config.category)
    match_analyzer = MatchAnalyzer(match,run_config=config)

```

#### Configuration file
To run the Analyzer, the configuration.yml file is needed and should be given as parameter when running the script.
```yaml
category: sim2d
logs_folder: path/to/logs
file_path: path/to/my/file
output_results: false
analysis:
  tester_2d: true
  ball_possession: true
  foul_charge: true
  playmodes: true
  ball_history: true
  penalty: true
  passing_accuracy: true
  corners_occurrencies: true
  tester_free_kick: true
  intercept_counter: true
  stamina: true
  time_after_events: true
  heatmap: true
  shooting: true
  speed: false
  find_goals: true
  goalkeeper: true
```

---
> 2021, RobôCIn

